<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Voodoo Media</title>

  <style>
  /* =============================
   IMPORTS
   ============================= */
  @import url('https://fonts.googleapis.com/css2?family=Bungee+Spice&display=swap');
  @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&display=swap');

  /* =============================
   THEME TOKENS
   ============================= */
  :root {
    --bg: #050608;
    --fg: rgba(226,232,240,0.92);
    --border: rgba(255,255,255,0.14);
    --shadow: 0 10px 30px rgba(0,0,0,0.35);
    --radius: 18px;

    /* Device-aware viewport height helper (mobile-safe) */
    --vh: 1vh;
  }

  /* =============================
   HUD TOKENS (LOGBOOK HUD)
   ============================= */
  :root {
    /* HUD palette (red) */
    --hud-bg: #040405;
    --hud-bg2: #07070a;
    --hud-panel: rgba(12, 7, 9, .72);
    --hud-panel2: rgba(18, 8, 10, .55);

    --hud-r1:#ff2a2a;
    --hud-r2:#ff4c4c;
    --hud-r3:#ff9a9a;

    --hud-line: rgba(255, 60, 60, .28);
    --hud-line2: rgba(255, 60, 60, .16);
    --hud-txt: rgba(255, 210, 210, .92);
    --hud-muted: rgba(255, 210, 210, .62);

    --hud-glow: 0 0 18px rgba(255,60,60,.42), 0 0 48px rgba(255,60,60,.16);
    --hud-shadow: 0 14px 40px rgba(0,0,0,.55);
    --hud-radius: 18px;
  }

  /* =============================
   BASE RESET
   ============================= */
  * { box-sizing: border-box; }

  /* =============================
   PAGE BACKGROUND + TYPOGRAPHY
   ============================= */
  html, body {
    margin: 0;
    background-color: var(--bg);
    background-image:
      radial-gradient(1200px 700px at 50% 20%, rgba(255,0,0,0.10), transparent 60%),
      radial-gradient(900px 500px at 30% 80%, rgba(0,170,255,0.10), transparent 55%),
      linear-gradient(180deg, rgba(0,0,0,0.62), rgba(0,0,0,0.72)),
      url("https://photos.smugmug.com/photos/i-S6VqGNm/0/M45NqwbQtnVS2NJd9435Lw5xwsQsCXbqmGF8RBTH7/X2/i-S6VqGNm-X2.jpg");
    background-size: auto, auto, auto, cover;
    background-position: center, center, center, center;
    background-repeat: no-repeat;
    background-attachment: scroll, scroll, scroll, fixed;

    color: var(--fg);
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  }

  /* =============================
   APP SHELL / VIEWS
   ============================= */
  #app { min-height: 100%; display: grid; }
  .view { display: none; min-height: 100vh; }
  .view.active { display: grid; }
  #view-home { grid-template-rows: auto 1fr; }

  /* =============================
   HEADER / BRAND BAR
   ============================= */
  header {
    position: sticky;
    top: 0;
    backdrop-filter: blur(10px);
    background: rgba(0,0,0,0.35);
    border-bottom: 1px solid rgba(255,255,255,0.08);
    padding: 10px 18px 12px;
    z-index: 5;
    display: grid;
    justify-items: center;
    gap: 8px;
  }

  .brandLink { display: inline-flex; align-items: center; justify-content: center; text-decoration: none; cursor: pointer; }
  .brandImg { height: 100px; width: auto; display: block; }

  /* =============================
   HUD LAYOUT / STAGE
   ============================= */
  .hudStage{
    /* Flush HUD to top of page (no vertical centering / no top padding) */
    min-height: calc(var(--vh) * 100);
    display: grid;
    justify-items: center;
    align-items: start;
    padding: 0;
  }

  .hud{
    width: min(1080px, 100%);
    /* Make the HUD fill the usable screen height (device-aware) */
    height: calc(var(--vh) * 100);

    border-radius: 22px;
    position: relative;
    overflow: hidden;
    box-shadow: var(--hud-shadow);
    background: radial-gradient(1200px 700px at 55% 35%, #1a070a 0%, var(--hud-bg) 55%, #020203 100%);

    /* Boot/open animation (whole HUD) */
    opacity: 0;
    transform: translateY(10px) scale(.985);
    filter: blur(2px);
    transform-origin: top center;
    will-change: transform, opacity, filter;
    animation: hudBootIn 1100ms ease-out 120ms forwards;
  }

  .hud::before{
    content: "";
    position: absolute;
    inset: 0;
    background:
      radial-gradient(900px 520px at 50% 40%, rgba(255,40,40,.08), transparent 60%),
      radial-gradient(1200px 900px at 50% 80%, rgba(255,40,40,.06), transparent 65%),
      linear-gradient(180deg, rgba(0,0,0,.15), rgba(0,0,0,.60));
    pointer-events: none;
  }

  .hud::after{
    content: "";
    position: absolute;
    inset: 0;
    background:
      repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,.035) 0px,
        rgba(255,255,255,.035) 1px,
        rgba(0,0,0,0) 3px,
        rgba(0,0,0,0) 6px
      );
    mix-blend-mode: overlay;
    opacity: .08;
    pointer-events: none;
  }

  .hudSweep{
    position: absolute;
    left: 0;
    right: 0;
    top: -20%;
    height: 22%;
    background: linear-gradient(
      to bottom,
      rgba(255,60,60,0) 0%,
      rgba(255,60,60,.10) 45%,
      rgba(255,60,60,.16) 50%,
      rgba(255,60,60,.10) 55%,
      rgba(255,60,60,0) 100%
    );
    opacity: .0;
    mix-blend-mode: screen;
    pointer-events: none;
    filter: blur(0.4px);
    animation: hudAmbientSweep 4s ease-in-out 2.2s infinite;
  }

  .hudNoise{
    position: absolute;
    inset: 0;
    background-image:
      url("data:image/svg+xml,%3Csvg xmlns='https://www.w3.org/2000/svg' width='160' height='160'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='160' height='160' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
    opacity: .07;
    mix-blend-mode: overlay;
    pointer-events: none;
    animation: hudNoiseDrift 3.2s steps(2,end) infinite;
  }

  .hudFrame{
    position: absolute;
    inset: 0;
    border-radius: 22px;
    border: 2px solid rgba(255,60,60,.28);
    box-shadow: inset 0 0 0 1px rgba(255,60,60,.10), inset 0 0 36px rgba(255,60,60,.08);
    pointer-events: none;
  }

  .hudFrameCorners::before,
  .hudFrameCorners::after{
    content: "";
    position: absolute;
    width: 46%;
    height: 30%;
    border: 2px solid rgba(255,60,60,.22);
    border-bottom: none;
    border-left: none;
    border-top-right-radius: 28px;
    top: -1px;
    right: -1px;
    filter: drop-shadow(0 0 10px rgba(255,60,60,.22));
    pointer-events: none;
  }

  .hudFrameCorners::after{
    border-top: none;
    border-right: none;
    border-bottom-left-radius: 28px;
    bottom: -1px;
    left: -1px;
    top: auto;
    right: auto;
  }

  .hudContent{
    position: absolute;
    inset: 0;
    display: grid;
    grid-template-rows: 74px 54px 1fr;
    padding: 14px 16px;
    gap: 12px;
    color: var(--hud-txt);
  }

  /* =============================
   HUD TOPBAR (brand)
   ============================= */
  .hudTopbar{
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--hud-radius);
    border: 1px solid rgba(255,60,60,.22);
    background: linear-gradient(180deg, rgba(18,8,10,.72), rgba(10,6,7,.55));
    box-shadow: inset 0 0 0 1px rgba(255,60,60,.08);
  }

  .hudBrandLink{
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }

  .hudBrandImg{
    height: 100px;
    width: auto;
    display: block;
    filter: drop-shadow(0 0 12px rgba(255,60,60,.35));
  }

  /* =============================
   HUD CONTENT (reveal + sweep)
   ============================= */
  .hudTopbar,
  .hudContent > :nth-child(2),
  .hudContent > :nth-child(3){
    opacity: 0;
    will-change: transform, opacity, filter;
  }

  .hudTopbar,
  .hudStub{
    font-size: 14px;
    border-width: 2px;
    gap: 10px;
    position: relative;
    overflow: hidden;
  }

  .hudTopbar > *,
  .hudStub > *{
    position: relative;
    z-index: 2;
  }

  .hudTopbar::after,
  .hudStub::after{
    content: "";
    position: absolute;
    inset: -35% -25%;
    background: linear-gradient(90deg, transparent, rgba(255,60,60,.28), transparent);
    transform: translateX(-80%) rotate(-10deg);
    opacity: 0;
    pointer-events: none;
    mix-blend-mode: screen;
    z-index: 3;
  }

  .hudTopbar{
    transform: translateY(-8px);
    animation: hudTopbarIn 540ms ease-out 720ms forwards;
  }

  .hudContent > :nth-child(2){
    transform: translateY(10px);
    animation: hudSectionIn 600ms cubic-bezier(.2,.8,.2,1) 820ms forwards;
  }

  .hudContent > :nth-child(3){
    transform: translateY(8px);
    animation: hudFooterIn 540ms ease-out 940ms forwards;
  }

  .hudTopbar::after{ animation: hudScanSweep 1100ms ease-in-out 760ms 1; }
  .hudContent > :nth-child(2)::after{ animation: hudScanSweep 1200ms ease-in-out 860ms 1; }
  .hudContent > :nth-child(3)::after{ animation: hudScanSweep 1200ms ease-in-out 980ms 1; }

  /* =============================
   HUD INTRO PILLS (tabs)
   ============================= */
  .hudIntroText{
    text-align: center;
    display: inline-block;
    white-space: nowrap;
    padding: 5px 10px;
    border: 1px solid rgba(255,60,60,.32);
    border-radius: var(--hud-radius);
    background: rgba(0,0,0,.18);
	text-decoration: none;
    color: inherit;
    cursor: pointer;
    position: relative;

    transition: transform 120ms ease, box-shadow 180ms ease, border-color 180ms ease, background 180ms ease, filter 180ms ease;
  }

  .hudIntroText.is-active{
    background: linear-gradient(180deg, rgba(255,60,60,.18), rgba(0,0,0,.14));
    border-color: rgba(255,60,60,.45);
    box-shadow:
      0 0 0 1px rgba(255,60,60,.20),
      0 0 24px rgba(255,60,60,.28),
      inset 0 0 22px rgba(255,60,60,.20);
    filter: brightness(1.06);
    animation: hudPillActivate 220ms ease-out;
  }

  .hudIntroText:active{ transform: translateY(1px); }

  .hudIntroType{
    display: inline-block;
    white-space: nowrap;
    overflow: hidden;
    width: 0ch;
    animation: hudTypeIn 420ms steps(var(--intro-chars), end) 720ms forwards;
  }

  .hudContent > :nth-child(2){
    display: flex;
    justify-content: center;
    align-items: center;
    background: transparent;
    border: none;
  }

  .hudContent > :nth-child(2),
  .hudContent > :nth-child(3){
    font-family: 'Orbitron', system-ui, sans-serif;
  }

  /* =============================
   HUD MAIN
   ============================= */
  .hudMain{
    border: 1px solid rgba(255,60,60,.32);
    background: rgba(0,0,0,.18);
    padding: 5px;
    font-size: 15px;
    border-radius: var(--hud-radius);
  }

  .hudMainTextBox{
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    padding: 0 22px;
  }

  [data-hud-main-text]{
    position: relative;
    display: block;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
    white-space: normal;
    overflow-wrap: anywhere;
    word-break: break-word;
    hyphens: auto;
    text-align: center;
  }

  .hudMain{
    padding-left: 10px;
    padding-right: 10px;
  }

  .hudMainLoad{
    display: block;
    width: 100%;
    will-change: transform, opacity, filter;
    opacity: 0;
    transform: translateY(18px);
    filter: blur(1px);
    animation: hudMainScrollBoot 820ms ease-out 1040ms forwards;
  }

  .hudMainType{
    display: flex;
    flex-direction: column;
    align-items: center;

    width: 100%;
    max-width: 100%;

    overflow: visible;
    letter-spacing: .10em;
    text-transform: none;
  }

  .hudLineOuter{
    display: block;
    width: 100%;
    max-width: 100%;
    text-align: center;
    overflow: visible;
  }

  .hudLineInner{
    display: inline-block;
    white-space: normal;
    overflow: visible;
    max-width: 100%;
    overflow-wrap: anywhere;
    word-break: break-word;

    width: auto;
    opacity: 0;
  }

  .hudLine:last-child::after{
    content: "";
    display: inline-block;
    width: 0.6ch;
    height: 1em;
    margin-left: 0.3ch;
    border-right: 2px solid rgba(255, 210, 210, .85);
    transform: translateY(1px);
    animation: hudCaretBlink 640ms steps(2, end) calc(var(--last-line-delay) + 240ms) infinite;
  }

  [data-hud-main-text].isTyping::after{
    content: "▌";
    display: inline-block;
    margin-left: 2px;
    transform: translateY(1px);
    animation: hudCaretBlink 850ms steps(1, end) infinite;
  }

  .hudStub{
    display: grid;
    place-items: center;
    border-radius: var(--hud-radius);
    border: 1px dashed rgba(255,60,60,.26);
    background: rgba(0,0,0,.18);
    color: var(--hud-muted);
    letter-spacing: .14em;
    text-transform: uppercase;
    font-weight: 800;
    font-size: 12px;
  }

  .hudStub.hudMain{
    border: 1px solid rgba(255,60,60,.32);
    border-radius: var(--hud-radius);

    place-items: start center;
    align-content: start;
    padding-top: 20px;
  }

  /* =============================
   NEON FRAME (SVG tracer) - HUD MAIN addon
   ============================= */
  .neonFrameWrap{
    width: 100%;
    margin-top: 16px;
    padding: 8px 10px 14px;
    display: grid;
    place-items: center;
  }

  .neonFrame{
    width: min(920px, 100%);
    height: 125px;
    display: block;
  }

  /* =============================
   CHANGE PULSE (frame reacts)
   ============================= */
  .neonFrameWrap.pulse{
    animation: hudPulse 260ms ease-out;
  }

  .neonFrameWrap.pulse .frameTrace{
    animation:
      traceRun 1.8s linear infinite,
      traceSurge 260ms ease-out;
  }

  .frameBase{
    fill: rgba(255, 40, 40, 0.08);
    stroke: rgba(255, 70, 70, 0.65);
    stroke-width: 10;
    stroke-linejoin: round;
  }

  .frameTrace{
    fill: transparent;
    stroke: rgba(255, 90, 90, 1);
    stroke-width: 12;
    stroke-linejoin: round;

    stroke-dasharray: 140 2200;
    stroke-dashoffset: 0;
    animation: traceRun 1.8s linear infinite;
  }

  .neonFrameWrap{ position: relative; }

  .neonFrameText{
    position: absolute;
    inset: 0;
    display: grid;
    place-items: center;
    padding: 0 14px;
    text-align: center;
    pointer-events: auto;
  }

  .neonFrameTextInner{
    width: min(700px, 100%);
    left: 50px;
    right: 50px;
    height: 70%;
    display: grid;
    place-items: center;
    padding: 18px 22px;
    padding-left: 5px;
    padding-right: 10px;

    overflow-x: visible;
    overflow-y: visible;

    box-sizing: border-box;
  }

  .neonFrameTextInner::-webkit-scrollbar{ width: 8px; }
  .neonFrameTextInner::-webkit-scrollbar-track{ background: rgba(255,255,255,0.04); border-radius: 999px; }
  .neonFrameTextInner::-webkit-scrollbar-thumb{ background: rgba(255,90,90,0.35); border-radius: 999px; }

  .neonFrameTextInner .hudMainType{
    display: block;
    width: 100%;
    max-width: 78ch;
    line-height: 1.45;

    white-space: normal;
    word-break: normal;
    overflow-wrap: break-word;
    hyphens: auto;

    font-size: clamp(12px, 1.05vw, 15px);
  }

  /* =============================
   RESPONSIVE
   ============================= */
  @media (max-width: 900px){
    .hud{ height: calc(var(--vh) * 100); }

    html, body{
      height: calc(var(--vh) * 100);
      overflow: hidden;
      overscroll-behavior: none;
    }

    body{
      position: fixed;
      inset: 0;
      width: 100%;
    }
  }

  @media (max-width: 520px){
    .neonFrameTextInner .hudMainType{
      letter-spacing: .06em;
    }
  }

  /* =============================
   MOTION REDUCTION
   ============================= */
  @media (prefers-reduced-motion: reduce){
    .hud, .hudSweep, .hudNoise,
    .hudTopbar, .hudContent > :nth-child(2), .hudContent > :nth-child(3){
      animation: none !important;
    }

    .hudIntroType{ animation: none !important; width: auto; }
    .hudIntroText.is-active{ animation: none !important; }
  }

  /* =============================
   KEYFRAMES
   ============================= */
  @keyframes hudAmbientSweep{
    0%{ transform: translateY(-10%); opacity: 0; }
    6%{ opacity: .55; }
    12%{ opacity: .0; }
    100%{ transform: translateY(140%); opacity: 0; }
  }

  @keyframes hudBootIn{
    0%{ opacity:0; transform: translateY(12px) scale(.98); filter: blur(2px); }
    55%{ opacity:1; transform: translateY(0) scale(1); filter: blur(0px); }
    100%{ opacity:1; transform: translateY(0) scale(1); filter: blur(0px); }
  }

  @keyframes hudNoiseDrift{
    0%{ transform: translate(0,0); }
    50%{ transform: translate(-2%, 1%); }
    100%{ transform: translate(0,0); }
  }

  @keyframes hudTopbarIn{ to{ opacity: 1; transform: translateY(0); } }

  @keyframes hudSectionIn{
    0%{ opacity: 0; transform: translateY(10px); filter: blur(1px); }
    100%{ opacity: 1; transform: translateY(0); filter: blur(0px); }
  }

  @keyframes hudFooterIn{ to{ opacity: 1; transform: translateY(0); } }

  @keyframes hudScanSweep{
    0%{ opacity: 0; transform: translateX(-85%) rotate(-10deg); }
    12%{ opacity: .85; }
    55%{ opacity: .45; }
    100%{ opacity: 0; transform: translateX(85%) rotate(-10deg); }
  }

  @keyframes hudPillActivate{
    0%{ box-shadow: 0 0 0 0 rgba(255,60,60,0); filter: brightness(1); }
    55%{ box-shadow: 0 0 0 1px rgba(255,60,60,.26), 0 0 28px rgba(255,60,60,.30), inset 0 0 26px rgba(255,60,60,.22); filter: brightness(1.08); }
    100%{ }
  }

  @keyframes hudTypeIn{ to{ width: calc(var(--intro-chars) * 1ch); } }

  @keyframes hudLineTypeInPxPx{
    to{ opacity: 1; }
  }

  @keyframes hudCaretBlink{
    0%{ opacity: 0; }
    50%{ opacity: 1; }
    100%{ opacity: 0; }
  }

  @keyframes hudMainScrollBoot{
    0%{ opacity: 0; transform: translateY(18px); filter: blur(1px); }
    65%{ opacity: 1; transform: translateY(0); filter: blur(0px); }
    78%{ transform: translateY(2px); }
    100%{ opacity: 1; transform: translateY(0); filter: blur(0px); }
  }

  @keyframes hudPulse{
    0%   { transform: scale(1); filter: brightness(1); }
    40%  { transform: scale(1.012); filter: brightness(1.12); }
    100% { transform: scale(1); filter: brightness(1); }
  }

  @keyframes traceSurge{
    0%   { stroke-width: 12; filter: drop-shadow(0 0 0 rgba(255,90,90,0)); }
    40%  { stroke-width: 15; filter: drop-shadow(0 0 16px rgba(255,90,90,.55)); }
    100% { stroke-width: 12; filter: drop-shadow(0 0 0 rgba(255,90,90,0)); }
  }

  @keyframes traceRun{
    to { stroke-dashoffset: -2340; }
  }
  
  body.route-music .neonFrameWrap{
    display: none;
  }

</style>

</head>

<body>
<div id="app">
  <section id="view-home" class="view active">
    <main>
      <!-- LOGBOOK HUD (Phase 1: shell) -->
      <div class="hudStage">
        <div class="hud" id="hud">
          <div class="hudNoise" aria-hidden="true"></div>
          <div class="hudSweep" aria-hidden="true"></div>
          <div class="hudFrame" aria-hidden="true"></div>
          <div class="hudFrameCorners" aria-hidden="true"></div>

          <div class="hudContent">
            <div class="hudTopbar">
              <a class="hudBrandLink" href="#/home">
                <img class="hudBrandImg" src="https://photos.smugmug.com/photos/i-BsRTsVG/0/L4SW2t9W7D5HVTVq6hFCZdKrR8RLwktQt4KbdZ2ZB/X4/i-BsRTsVG-X4.png" alt="Voodoo Media" />
              </a>
            </div>
            <div class="hudStub">
			<a class="hudIntroText" href="#/home" data-nav="home"><span class="hudIntroType">Home</span></a>
  <a class="hudIntroText" href="#/music" data-nav="music"><span class="hudIntroType">Music</span></a>
  <a class="hudIntroText" href="#/wrestling" data-nav="wrestling"><span class="hudIntroType">Wrestling</span></a>
  <a class="hudIntroText" href="#/about" data-nav="about"><span class="hudIntroType">About</span></a>
</div>

            <div class="hudStub hudMain">
  <div class="neonFrameWrap" aria-hidden="false">
    <svg class="neonFrame" viewBox="0 0 1000 520" preserveAspectRatio="none" aria-hidden="true">
      <defs>
        <filter id="glow">
          <feGaussianBlur stdDeviation="6" result="blur"/>
          <feMerge>
            <feMergeNode in="blur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      </defs>

      <!-- Base dim glow -->
      <path class="frameBase" d="
        M120 20 H880
        L980 120 V400
        L880 500 H120
        L20 400 V120
        Z" />

      <!-- Bright energized tracer (animated) -->
      <path class="frameTrace" d="
        M120 20 H880
        L980 120 V400
        L880 500 H120
        L20 400 V120
        Z" filter="url(#glow)" />
    </svg>

    <!-- Typed HUD main text, placed INSIDE the frame -->
    <div class="neonFrameText">
      <div class="neonFrameTextInner">
        <div class="hudMainType"><div class="hudMainTextBox">
<div id="hudMainMount"></div>
</div></div>
      </div>
    </div>
  </div>
</div>
</div>
        </div>
      </div>
    </main>
  </section>
</div>

<script>
  // --- Device-aware full-height handling ---
  // Mobile browsers can lie about 100vh because of the address bar.
  // We set --vh to the *actual* innerHeight so the HUD truly fits the screen.
  (function(){
    const setVH = () => {
      document.documentElement.style.setProperty('--vh', (window.innerHeight * 0.01) + 'px');
    };
    setVH();
    window.addEventListener('resize', setVH, { passive: true });
    window.addEventListener('orientationchange', setVH, { passive: true });
  })();

  // Auto-set --intro-chars based on the text inside .hudIntroType
  // Leaves any manually-set --intro-chars alone (so nothing breaks).
  document.querySelectorAll('.hudIntroText').forEach(el => {
    const alreadySet = el.style.getPropertyValue('--intro-chars');
    if (alreadySet) return;

    const t = el.querySelector('.hudIntroType');
    if (!t) return;

    // Use trimmed text length
    const n = ((t.textContent || '').trim().length || 1) + 1; // +1 buffer to prevent last-character clipping
    el.style.setProperty('--intro-chars', n);
  });

  function pulseFrame(){
    const wrap = document.querySelector('.neonFrameWrap');
    if (!wrap) return;

    wrap.classList.remove('pulse');
    // force reflow so the animation can restart every time
    void wrap.offsetWidth;
    wrap.classList.add('pulse');
  }

  // HUD MAIN: terminal typing (paragraph mode)
  function typeHudMainText(newText, el){
    const t = el || document.querySelector('[data-hud-main-text]');
    if (!t) return;

    const fullText = (newText ?? t.textContent ?? '').toString().trim();
    if (!fullText) return;

    t.classList.add('isTyping');
    t.textContent = '';

    const speedMs = 12; // lower = faster (try 10–18)
    let i = 0;

    // cancel any previous run (if function is called again)
    if (t._typeTimer) clearInterval(t._typeTimer);

    t._typeTimer = setInterval(() => {
      i++;
      t.textContent = fullText.slice(0, i);

      if (i >= fullText.length) {
        clearInterval(t._typeTimer);
        t._typeTimer = null;
        // keep caret blinking after typing finishes
        // t.classList.remove('isTyping');
        t.textContent = fullText;       // ensure exact final text
      }
    }, speedMs);
  }

  // Stop any in-flight typing timers so previous route text can't keep running
  function stopAllTyping(){
    document.querySelectorAll('[data-hud-main-text]').forEach(el => {
      if (el && el._typeTimer){
        clearInterval(el._typeTimer);
        el._typeTimer = null;
      }
      if (el) el.classList.remove('isTyping');
    });
  }


  // =============================
  // Capability Modules (Routes)
  // =============================
  const mount = () => document.getElementById('hudMainMount');

  function setActiveTopNav(route){
    document.querySelectorAll('.hudStub [data-nav]').forEach(a => {
      a.classList.toggle('is-active', a.getAttribute('data-nav') === route);
    });
  }

  function routeKeyFromHash(){
    const hash = location.hash || '#/home';
    return (hash.replace(/^#\/?/, '').trim() || 'home').toLowerCase();
  }

  const ROUTE_COPY = {
    home: "Welcome to the landing site for Voodoo Media. Right now this is a placeholder for more content later but for now, please make your selection above.",
    wrestling: "Wrestling Archives - Coming Soon",
    about: "About Me - Coming Soon"
  };

  const modules = {
    home: {
      render(){
        const m = mount();
        if (!m) return;
        m.innerHTML = '<span data-hud-main-text></span>';
      },
      onEnter(){
        const el = document.querySelector('[data-hud-main-text]');
        typeHudMainText(ROUTE_COPY.home, el);
      }
    },

    music: {
      render(){
        const m = mount();
        if (!m) return;
        // Music clears the HUD main area for now
        m.innerHTML = '';
      },
      onEnter(){
        // Music module intentionally blank for now
      }
    },

    wrestling: {
      render(){
        const m = mount();
        if (!m) return;
        m.innerHTML = '<span data-hud-main-text></span>';
      },
      onEnter(){
        const el = document.querySelector('[data-hud-main-text]');
        typeHudMainText(ROUTE_COPY.wrestling, el);
      }
    },

    about: {
      render(){
        const m = mount();
        if (!m) return;
        m.innerHTML = '<span data-hud-main-text></span>';
      },
      onEnter(){
        const el = document.querySelector('[data-hud-main-text]');
        typeHudMainText(ROUTE_COPY.about, el);
      }
    }
  };

  let currentRoute = null;

  function navigate(route){
    const next = modules[route] ? route : 'home';

    // Route class on <body> (for visual state)
    document.body.classList.remove('route-home','route-music','route-wrestling','route-about');
    document.body.classList.add(`route-${next}`);
	
    setActiveTopNav(next);

  stopAllTyping();

    // Render fresh UI into mount for this route
    modules[next].render();

    // Enter route
    currentRoute = next;
    modules[next].onEnter();

    pulseFrame();
  }

  // ROUTING: respond to hash changes (tabs are anchors)
  window.addEventListener('hashchange', () => navigate(routeKeyFromHash()));

  // Initial load: default to #/home if no hash, then apply route
  (function(){
    if (!location.hash) location.hash = '#/home';
    navigate(routeKeyFromHash());
  })();
</script>

</body>
</html>
